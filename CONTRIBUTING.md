# Contributing to RustNative

Thank you for your interest in contributing to RustNative! This document provides guidelines and instructions for contributing to this project.

## Table of Contents

- [Code of Conduct](#code-of-conduct)
- [Getting Started](#getting-started)
- [Development Setup](#development-setup)
- [Project Structure](#project-structure)
- [Making Changes](#making-changes)
- [Testing](#testing)
- [Pull Request Process](#pull-request-process)
- [Coding Guidelines](#coding-guidelines)

## Code of Conduct

- Be respectful and inclusive
- Welcome newcomers and help them learn
- Focus on constructive feedback
- Respect different viewpoints and experiences

## Getting Started

1. **Fork the repository** on GitHub
2. **Clone your fork** locally:
   ```bash
   git clone https://github.com/YOUR_USERNAME/RustNative.git
   cd RustNative
   ```
3. **Add upstream remote**:
   ```bash
   git remote add upstream https://github.com/iNerdStack/RustNative.git
   ```

## Development Setup

### Prerequisites

- **macOS** (required for iOS development)
- **Node.js** 18+
- **Rust** 1.82+ ([Install via rustup](https://rustup.rs/))
- **Xcode** 12+ (for iOS)
- **Android Studio** with NDK (for Android)

### Installation

```bash
# Install dependencies (root)
yarn install

# Install example app dependencies
cd example
yarn install

# Generate Craby bindings
cd ..
npx crabygen

# Build native modules
npx crabygen build

# iOS: Install pods
cd example/ios && pod install && cd ../..
```

### Running the App

```bash
# Android
cd example && yarn android

# iOS
cd example && yarn ios
```

## Project Structure

```
rust-native-compute/
â”œâ”€â”€ src/                          # TypeScript module specs (Craby)
â”‚   â”œâ”€â”€ index.ts                  # Module exports
â”‚   â””â”€â”€ NativeBruteForce.ts       # Rust module spec
â”œâ”€â”€ crates/lib/                   # Rust implementation
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ lib.rs                # Library entry
â”‚       â”œâ”€â”€ ffi.rs                # FFI bindings
â”‚       â”œâ”€â”€ generated.rs          # Auto-generated by Craby
â”‚       â””â”€â”€ brute_force_impl.rs   # MD5 brute force logic
â”œâ”€â”€ example/                      # React Native demo app
â”‚   â”œâ”€â”€ android/
â”‚   â”‚   â””â”€â”€ app/src/main/java/com/rustnative/
â”‚   â”‚       â”œâ”€â”€ MainActivity.kt
â”‚   â”‚       â”œâ”€â”€ MainApplication.kt
â”‚   â”‚       â”œâ”€â”€ NativeBruteForceKotlinModule.kt   # Kotlin implementation
â”‚   â”‚       â””â”€â”€ NativeBruteForceKotlinPackage.kt
â”‚   â”œâ”€â”€ ios/
â”‚   â”‚   â””â”€â”€ RustNative/
â”‚   â”‚       â”œâ”€â”€ RCTBruteForceSwift.swift          # Swift implementation
â”‚   â”‚       â”œâ”€â”€ RCTBruteForceSwift.m              # ObjC bridge
â”‚   â”‚       â””â”€â”€ RustNative-Bridging-Header.h
â”‚   â””â”€â”€ src/
â”‚       â”œâ”€â”€ components/           # UI components
â”‚       â”œâ”€â”€ screens/              # App screens
â”‚       â””â”€â”€ utils/
â”‚           â”œâ”€â”€ JsBruteForce.ts   # JavaScript implementation
â”‚           â””â”€â”€ NativeBruteForceNative.ts  # Native module wrapper
â””â”€â”€ documentation/                # Detailed documentation
```

## Making Changes

### Branch Naming

- `feature/description` - New features
- `fix/description` - Bug fixes
- `docs/description` - Documentation updates
- `perf/description` - Performance improvements

### Commit Messages

Follow conventional commits:

```
type(scope): brief description

Longer description if needed

- Additional details
- More context
```

**Types**: `feat`, `fix`, `docs`, `style`, `refactor`, `perf`, `test`, `chore`

**Examples**:
```bash
feat(kotlin): optimize byte array comparison
fix(rust): handle cancellation edge case
docs(readme): add performance benchmarks
perf(js): reduce string allocations
```

## Testing

### Test All Implementations

Before submitting a PR, test all 4 execution modes:

1. **JavaScript Mode**
   - Test with 1-3 character plaintexts
   - Verify cancellation works
   
2. **Rust Mode**
   - Same tests as JavaScript
   - Compare performance metrics

3. **Kotlin Mode (Android)**
   - Test on Android emulator/device
   - Verify similar performance to Rust

4. **Swift Mode (iOS)**
   - Test on iOS simulator/device
   - Verify similar performance to Rust

### Performance Benchmarks

Run benchmarks before and after changes:

```bash
# Test "aaaz" (4 characters) on all modes
# Record: time, attempts, checks/sec
```

Expected performance ratios:
- JS: 1x (baseline)
- Kotlin: 8-12x faster
- Swift: 15-20x faster
- Rust: 18-25x faster

### Build Tests

```bash
# Android
cd example && npm run android

# iOS
cd example && yarn pod:install && yarn ios

# Verify no compilation errors
```

## Pull Request Process

1. **Update your fork**:
   ```bash
   git fetch upstream
   git checkout main
   git merge upstream/main
   ```

2. **Create a feature branch**:
   ```bash
   git checkout -b feature/your-feature-name
   ```

3. **Make your changes** and commit:
   ```bash
   git add .
   git commit -m "feat(scope): description"
   ```

4. **Push to your fork**:
   ```bash
   git push origin feature/your-feature-name
   ```

5. **Open a Pull Request** on GitHub with:
   - Clear description of changes
   - Before/after performance metrics (if applicable)
   - Screenshots/videos (for UI changes)
   - Test results on Android and iOS

6. **Address review feedback** if needed

## Coding Guidelines

### TypeScript/JavaScript

- Use TypeScript for all new code
- Follow existing code style (Prettier config)
- Add JSDoc comments for public APIs
- Prefer functional components with hooks

### Rust

- Follow Rust standard style (`cargo fmt`)
- Add documentation comments (`///`)
- Keep unsafe code minimal and documented
- Use meaningful variable names

### Kotlin

- Follow Kotlin coding conventions
- Use coroutines for async operations
- Prefer immutability (`val` over `var`)
- Add KDoc comments for public functions

### Swift

- Follow Swift API Design Guidelines
- Use modern Swift features (5.5+)
- Prefer value types over reference types
- Add documentation comments (`///`)

## Areas for Contribution

### Easy (Good First Issues)

- Add more test hash examples
- Improve UI/UX polish
- Add dark mode support
- Write additional documentation
- Fix typos or improve README

### Medium

- Add SHA-256/SHA-512 algorithms
- Implement progress callbacks for native modules
- Add history tracking for benchmark runs
- Create performance comparison graphs
- Add custom character set support

### Advanced

- Parallel processing with Rayon (Rust)
- SIMD optimizations
- Multi-threading in Kotlin/Swift
- WebAssembly integration
- Advanced benchmarking tools

## Questions?

- Open an issue for bugs or feature requests
- Start a discussion for questions or ideas
- Tag maintainers for urgent issues

## License

By contributing, you agree that your contributions will be licensed under the MIT License.

---

**Thank you for contributing to RustNative!** ðŸš€
